(function(e){function t(t){for(var r,s,i=t[0],u=t[1],c=t[2],l=0,f=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);p&&p(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var p=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},"27f4":function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("8c4f"),o=n("5f5b"),s=n("b1e0"),i=(n("f9e3"),n("2dd8"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")}),u=[],c={name:"App"},p=c,l=n("2877"),f=Object(l["a"])(p,i,u,!1,null,null,null),d=f.exports,h=n("2f62"),b=n("c080");r["default"].use(h["a"]);var m=new h["a"].Store({modules:{githubStore:b["a"]}}),g=m,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app"},[r("img",{staticClass:"banner-img",attrs:{alt:"Vue logo",src:n("bdb1")}}),e.isLoggedIn?r("b-button",{staticClass:"login-button",attrs:{variant:"danger"},on:{click:function(t){return e.logout()}}},[e._v("logout")]):r("b-button",{staticClass:"login-button",attrs:{variant:"success"},on:{click:function(t){return e.oAuthAuthenticate()}}},[e._v("login")]),r("br"),r("p",[e._v(e._s(e.isLoggedIn?"Logged in as: "+e.loginUser:"Please log in"))]),r("br"),r("h1",[e._v("Create your first RepoSense report!")]),r("h2",[e._v("Repositories")]),r("RepoList",{attrs:{repos:e.repos},on:{updateRepo:function(t){return e.updateRepo(t)},addRepo:function(t){return e.repos.push(t)},removeRepo:function(t){return e.repos.splice(t,1)}}}),r("h2",[e._v("Advanced Options")]),r("AdvancedOptions",{attrs:{startDate:e.startDate,endDate:e.endDate,timezone:e.timezone},on:{updateStartDate:function(t){e.startDate=t},updateEndDate:function(t){e.endDate=t},updateTimezone:function(t){e.timezone=t}}}),r("br"),r("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.startGenerateReport()}}},[e._v("Generate")]),r("p",[e._v(e._s(e.generateReportResult))])],1)},w=[],R=(n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1")),x=n("5530"),k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"repolist",attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{cols:"9"}},[e._v("Repository URL:")]),n("b-col",{attrs:{cols:"2"}},[e._v("Branch:")])],1),e._l(e.repos,(function(t,r){return[n("b-row",{staticClass:"repolist-row-input"},[n("b-col",{attrs:{cols:"9"}},[n("b-form-input",{attrs:{value:t.url,placeholder:"Please enter the full github url of the repository."},on:{change:function(t){return e.updateRepoUrl(r,t)}}})],1),n("b-col",{attrs:{cols:"2"}},[n("b-form-input",{attrs:{value:t.branch,placeholder:"master"},on:{change:function(t){return e.updateRepoBranch(r,t)}}})],1),n("b-col",[r+1==e.repos.length?n("b-icon",{staticClass:"plus-button",attrs:{icon:"plus-circle"},on:{click:function(t){return e.addRepo()}}}):n("b-icon",{staticClass:"cross-button",attrs:{icon:"x-circle"},on:{click:function(t){return e.removeRepo(r)}}})],1)],1)]})),n("b-row",[n("b-col",[n("div",{staticClass:"repolist-comment"},[e._v("Repositories must be in Git and publicly accessible")])])],1)],2)},y=[],_={name:"RepoList",props:{repos:Array},emits:["addRepo","removeRepo","updateRepo","updateRepo"],methods:{addRepo:function(){this.$emit("addRepo",{url:"",branch:""})},removeRepo:function(e){this.$emit("removeRepo",e)},updateRepoUrl:function(e,t){this.$emit("updateRepo",{index:e,field:"url",newValue:t})},updateRepoBranch:function(e,t){this.$emit("updateRepo",{index:e,field:"branch",newValue:t})}}},O=_,S=(n("67f2"),Object(l["a"])(O,k,y,!1,null,null,null)),j=S.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"advanced-options",attrs:{fluid:""}},[n("b-row",[n("b-col",[e._v("Start Date: "),n("b-form-input",{attrs:{type:"date",value:e.startDate},on:{change:function(t){return e.updateStartDate(t)}}}),n("i",[e._v(e._s(e.startDate?"":"Default first commit date used"))])],1),n("b-col",[e._v("Until Date: "),n("b-form-input",{attrs:{type:"date",value:e.endDate},on:{change:function(t){return e.updateEndDate(t)}}}),n("i",[e._v(e._s(e.endDate?"":"Default today's date used"))])],1),n("b-col",[e._v("Time Zone: "),n("i",[e._v("UTC"+e._s(e.timezoneStr))]),n("b-form-input",{attrs:{value:e.timezone,type:"range",min:"-12",max:"14",step:"0.5"},on:{input:function(t){return e.updateTimezone(t)}}})],1)],1)],1)},T=[],U=(n("a9e3"),n("99af"),n("4160"),n("a15b"),n("d81d"),n("ac1f"),n("4d90"),n("1276"),n("159b"),n("3835"));function E(){return[["Repository's Location","Branch","File formats","Ignore Glob List","Ignore standalone config","Ignore Commits List","Ignore Authors List"]]}var P=function(e,t){return String(e).padStart(t,"0")};function $(e,t){var n=e>=0?"+":"-";e=Math.abs(e);var r=Math.floor(e),a=60*(e-r),o=t?":":"";return"".concat(n).concat(P(r,2)).concat(o).concat(P(a,2))}function z(e){if(!e)return"";var t=e.split("-"),n=Object(U["a"])(t,3),r=n[0],a=n[1],o=n[2];return"".concat(o,"/").concat(a,"/").concat(r)}function C(e,t,n){var r;r=e?z(e):"d1";var a="";return t&&(a="-u ".concat(z(t))),"#!/bin/bash\n\n# Downloads a specific version of RepoSense.jar of your choice from our repository\n## Examples of supported options:\n### ./get-reposense.py --release               # Gets the latest release (Stable)\n### ./get-reposense.py --master                # Gets the latest master  (Beta)\n### ./get-reposense.py --tag v1.6.1            # Gets a specific version\n### ./get-reposense.py --release --overwrite   # Overwrite RepoSense.jar, if exists, with the latest release\n\n./get-reposense.py --master\n\n# Executes RepoSense\n# Do not change the default output folder name (reposense-report)\n## Examples of other valid options; For more, please view the user guide\n### java -jar RepoSense.jar --repos https://github.com/reposense/RepoSense.git\n\njava -jar RepoSense.jar --config ./configs -s ".concat(r," -t UTC").concat($(n)," ").concat(a)}function A(e){var t=e.map((function(e){return e.join(",")}));return t.join("\n")}function I(e,t){return G.apply(this,arguments)}function G(){return G=Object(R["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,s,i,u,c,p,l,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.repos,a=t.since,o=t.until,s=t.timezone,i=0;case 2:if(!(i<r.length)){e.next=8;break}if("https://github.com/"===r[i].url.substring(0,19)){e.next=5;break}return e.abrupt("return","Repository names should start with: https://github.com/");case 5:i+=1,e.next=2;break;case 8:return e.next=10,n.dispatch("repoExists");case 10:if(u=e.sent,u){e.next=17;break}return e.next=14,n.dispatch("forkReposense");case 14:return e.next=16,n.dispatch("enableGithubActions");case 16:n.dispatch("enableGithubPages");case 17:return c=E(),r.forEach((function(e){return c.push(["".concat(e.url,".git"),e.branch,"","","","",""])})),p=A(c),l=C(a,o,s),e.prev=21,e.next=24,n.dispatch("updateFile",{path:"configs/repo-config.csv",strContent:p});case 24:return e.next=26,n.dispatch("updateFile",{path:"run.sh",strContent:l});case 26:e.next=31;break;case 28:return e.prev=28,e.t0=e["catch"](21),e.abrupt("return","Invalid permissions given");case 31:return f=n.state.githubStore.loginUser,e.abrupt("return","Success! Your report will be generated at https://".concat(f,".github.io/publish-RepoSense/"));case 33:case"end":return e.stop()}}),e,null,[[21,28]])}))),G.apply(this,arguments)}var K={name:"AdvancedOptions",props:{startDate:String,endDate:String,timezone:Number},emits:["updateStartDate","updateEndDate","updateTimezone"],computed:{timezoneStr:function(){return $(this.timezone,!0)}},methods:{updateStartDate:function(e){this.$emit("updateStartDate",e)},updateEndDate:function(e){this.$emit("updateEndDate",e)},updateTimezone:function(e){this.$emit("updateTimezone",Number(e))}}},L=K,q=(n("6e09"),Object(l["a"])(L,D,T,!1,null,null,null)),B=q.exports,F="https://github.com/login/oauth/authorize",M="c498493d4c565ced8d0b",N={name:"Home",components:{RepoList:j,AdvancedOptions:B},data:function(){var e=localStorage.getItem("savedRepos"),t=null;return t=e?JSON.parse(e):[{url:"",branch:""}],{repos:t,startDate:"",endDate:"",timezone:8,generateReportResult:""}},computed:Object(x["a"])(Object(x["a"])({},Object(h["c"])({loginUser:function(e){return e.githubStore.loginUser}})),Object(h["b"])({isLoggedIn:"isAuthenticated"})),watch:{repos:{handler:function(e){localStorage.setItem("savedRepos",JSON.stringify(e))},deep:!0}},created:function(){this.initiate()},methods:{updateRepo:function(e){this.$set(this.repos[e.index],e.field,e.newValue)},initiate:function(){var e=this;return Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("authenticate");case 2:case"end":return t.stop()}}),t)})))()},startGenerateReport:function(){var e=this;return Object(R["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoggedIn||(e.generateReportResult="Please login first."),n={repos:e.repos,since:e.startDate,until:e.endDate,timezone:e.timezone},e.generateReportResult="Generating Report, please wait...",t.next=5,I(n,e.$store);case 5:e.generateReportResult=t.sent;case 6:case"end":return t.stop()}}),t)})))()},oAuthAuthenticate:function(){var e={client_id:M,scope:"public_repo"},t=new URLSearchParams(e).toString();window.location="".concat(F,"?").concat(t)},logout:function(){this.$store.commit("logout")}}},J=N,V=(n("cccb"),Object(l["a"])(J,v,w,!1,null,null,null)),H=V.exports,W=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("h1",[e._v("Authenticating please wait.")])])}],Z="https://ghrepowizard.herokuapp.com/authenticate",Q={name:"Auth",created:function(){this.handleAuthRedirect()},methods:{requestToken:function(e){return Object(R["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(Z,"/").concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r.token);case 7:case"end":return t.stop()}}),t)})))()},handleAuthRedirect:function(){var e=this;return Object(R["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$route.query.code,n){t.next=4;break}return e.$router.push({path:"/",query:{}}),t.abrupt("return");case 4:return t.prev=4,t.next=7,e.requestToken(n);case 7:return r=t.sent,t.next=10,e.$store.dispatch("authenticate",r);case 10:e.$router.push({path:"/",query:{}}),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](4),e.$router.push({path:"/",query:{}});case 16:case"end":return t.stop()}}),t,null,[[4,13]])})))()}}},X=Q,ee=Object(l["a"])(X,W,Y,!1,null,null,null),te=ee.exports,ne=n("8cdb"),re=[{path:"/",component:H},{path:"/authenticating",component:te},{path:"/*",component:ne["default"]}],ae=new a["a"]({mode:"history",base:"/wizard/",routes:re}),oe=ae;r["default"].use(a["a"]),r["default"].use(o["a"]),r["default"].use(s["a"]),new r["default"]({render:function(e){return e(d)},store:g,router:oe}).$mount("#app")},"5ced":function(e,t,n){},"67f2":function(e,t,n){"use strict";n("aafe")},"6e09":function(e,t,n){"use strict";n("92af")},"8cdb":function(e,t,n){"use strict";var r=n("be7b"),a=n("f7e1"),o=n("2877"),s=Object(o["a"])(a["default"],r["a"],r["b"],!1,null,null,null);t["default"]=s.exports},"92af":function(e,t,n){},aafe:function(e,t,n){},bdb1:function(e,t,n){e.exports=n.p+"img/reposense_logo.a5ba527a.svg"},be7b:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("h1",[e._v("404 Page Not Found.")])])}]},c080:function(e,t,n){"use strict";(function(e){n("d3b7"),n("25f0"),n("96cf");var r=n("1da1"),a=n("94a3"),o=n("9bec"),s="publish-RepoSense",i=5;function u(e){return new Promise((function(t){return setTimeout(t,e)}))}var c={state:function(){return{accessToken:localStorage.getItem("accessToken")||null,octokit:null,publicKey:"",publicKeyId:"",loginUser:""}},mutations:{setOctokit:function(e,t){e.accessToken=t,localStorage.setItem("accessToken",t),e.octokit=new o["a"]({auth:t})},setLoginUser:function(e,t){e.loginUser=t},setPublicKey:function(e,t){var n=t.publicKey,r=t.publicKeyId;e.publicKey=n,e.publicKeyId=r},logout:function(e){e.accessToken=null,e.octokit=null,e.loginUser="",localStorage.removeItem("accessToken")}},actions:{authenticate:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,a=e.commit,o=e.dispatch,t=t||r.accessToken,t){n.next=4;break}return n.abrupt("return");case 4:return a("setOctokit",t),n.next=7,r.octokit.request("GET /user");case 7:if(s=n.sent,200===s.status){n.next=11;break}return a("logout"),n.abrupt("return");case 11:return a("setLoginUser",s.data.login),n.next=14,o("getPublicKey");case 14:case"end":return n.stop()}}),n)})))()},forkReposense:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.dispatch,t.next=3,n.octokit.request("POST /repos/{owner}/{repo}/forks",{owner:"reposense",repo:s});case 3:a=!1,o=1;case 5:if(a||!(o<i)){t.next=14;break}return t.next=8,u(1e3*o);case 8:return t.next=10,r("repoExists");case 10:a=t.sent,o+=1,t.next=5;break;case 14:case"end":return t.stop()}}),t)})))()},repoExists:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,t.next=3,n.octokit.request("GET /repos/{owner}/{repo}",{owner:n.loginUser,repo:s});case 3:return r=t.sent,t.abrupt("return",200===r.status&&r.data.fork);case 5:case"end":return t.stop()}}),t)})))()},getPublicKey:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.commit,t.next=3,n.octokit.request("GET /repos/{owner}/{repo}/actions/secrets/public-key",{owner:n.loginUser,repo:s});case 3:a=t.sent,r("setPublicKey",{publicKey:a.data.key,publicKeyId:a.data.key_id});case 5:case"end":return t.stop()}}),t)})))()},addSecret:function(t,n){return Object(r["a"])(regeneratorRuntime.mark((function r(){var o,i,u,c,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=t.state,o.publicKey){r.next=4;break}return r.next=4,o.getPublicKey();case 4:return i=e.from(n),u=e.from(o.publicKey,"base64"),c=Object(a["a"])(i,u),p=e.from(c).toString("base64"),r.next=10,o.octokit.request("PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}",{owner:o.loginUser,repo:s,secret_name:"ACCESS_TOKEN",encrypted_value:p,key_id:o.publicKeyId});case 10:case"end":return r.stop()}}),r)})))()},updateFile:function(t,n){return Object(r["a"])(regeneratorRuntime.mark((function r(){var a,o,i,u,c,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.state,o=n.path,i=n.strContent,r.next=4,a.octokit.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:a.loginUser,repo:s,path:o});case 4:return u=r.sent,c=u.data.sha,p=e.from(i).toString("base64"),r.next=9,a.octokit.request("PUT /repos/{owner}/{repo}/contents/{path}",{owner:a.loginUser,repo:s,path:o,message:"Update ".concat(o," using Reposense Wizard."),content:p,sha:c});case 9:case"end":return r.stop()}}),r)})))()},enableGithubActions:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,t.next=3,n.octokit.request("PUT /repos/{owner}/{repo}/actions/permissions",{owner:n.loginUser,repo:s,enabled:!0,allowed_actions:"all"});case 3:case"end":return t.stop()}}),t)})))()},enableGithubPages:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,t.next=3,n.octokit.request("POST /repos/{owner}/{repo}/pages",{owner:n.loginUser,repo:s,source:{branch:"gh-pages"},mediaType:{previews:["switcheroo"]}});case 3:case"end":return t.stop()}}),t)})))()}},getters:{isAuthenticated:function(e){return null!=e.octokit}}};t["a"]=c}).call(this,n("b639").Buffer)},cccb:function(e,t,n){"use strict";n("5ced")},f7e1:function(e,t,n){"use strict";var r=n("27f4"),a=n.n(r);t["default"]=a.a}});
//# sourceMappingURL=app.ed17310a.js.map